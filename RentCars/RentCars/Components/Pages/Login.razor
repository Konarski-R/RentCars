@page "/login"
@using RentCars.Model
@inject NavigationManager NavigationManager
@* @inject DataService DataService *@
@rendermode InteractiveServer

<h3>Login</h3>

@if (loginError)
{
    <p style="color: red;">Invalid username or password.</p>
}

<form>
    <label for="username">Username:</label>
    <input type="text" id="username" @bind="username" />

    <label for="password">Password:</label>
    <input type="password" id="password" @bind="password" />

    <button type="submit" @onclick="LogIn">Login</button>
</form>

@if(!samepw)
{
    <div>The password is wrong.</div>
}

<button @onclick="MoveToRegister">Register</button>


@code {
    private string username;
    private string password;
    private bool loginError;
    static UserDBUsage db;
    private bool samepw = true;



    private void LogIn()
    {
        UserDBUsage dBUser = new();
        User user = dBUser.SelectFromUserTable(username);

        if (user != null)
        {
            if(user.Password == password)
            {
                // DataService.SharedUser = user;
                NavigationManager.NavigateTo("/carshow", true, true);
            }
            else
            {
                samepw = false;
            }
        }

        // // Your authentication logic goes here
        // if (username == "admin" && password == "password")
        // {
        //     // Successful login
        //     NavigationManager.NavigateTo("/carshow", true, true);
        // }
        // else
        // {
        //     // Failed login
        //     loginError = true;
        // }
        
    }
    public void MoveToRegister()
    {
        NavigationManager.NavigateTo("/register");

    }
}